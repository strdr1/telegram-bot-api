# üöÄ –ì–∞–π–¥ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## ü§ñ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –±–æ—Ç

Telegram –±–æ—Ç –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ Mashkov —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üçΩÔ∏è **–ú–µ–Ω—é –∏ –¥–æ—Å—Ç–∞–≤–∫–∞**: –ü–æ–ª–Ω–æ–µ –º–µ–Ω—é —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏, –∫–æ—Ä–∑–∏–Ω–∞, –æ–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- üìÖ **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–∏–∫–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤—ã–±–æ—Ä–æ–º –º–µ—Å—Ç–∞ –Ω–∞ —Å—Ö–µ–º–µ –∑–∞–ª–∞
- üéâ **–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏ —á–∞—Å—Ç–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (–¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è, —Å–≤–∞–¥—å–±—ã, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤—ã)
- ü§ñ **AI-–ø–æ–º–æ—â–Ω–∏–∫**: –£–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –æ—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
- üì± **–ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤ (https://strdr1.github.io/mashkov-telegram-app/)
- üë§ **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º, –∞–¥—Ä–µ—Å–∞–º–∏, –∑–∞–∫–∞–∑–∞–º–∏
- üìä **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é, –∑–∞–∫–∞–∑–∞–º–∏, —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Presto API –¥–ª—è –º–µ–Ω—é
- AI –Ω–∞ –±–∞–∑–µ Mistral AI
- Webhook + polling —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- Supervisor –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

---

## üåê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

### SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```bash
ssh root@155.212.164.61
```

### –î–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞:
- **IP**: 155.212.164.61
- **–î–æ–º–µ–Ω**: a950841.fvds.ru
- **–û–°**: Ubuntu 24.04
- **–ü—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É**: /opt/telegram-bot

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–ø–æ—Å–ª–µ git push):

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:**
   ```bash
   ssh root@155.212.164.61
   ```

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:**
   ```bash
   cd /opt/telegram-bot
   ```

3. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –∏–∑ GitHub:**
   ```bash
   sudo -u botuser git pull origin master
   ```

4. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ requirements.txt –∏–∑–º–µ–Ω–∏–ª—Å—è):**
   ```bash
   sudo -u botuser /opt/telegram-bot/venv/bin/pip install -r requirements.txt
   ```

5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   sudo supervisorctl restart telegram-bot-group
   ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
sudo supervisorctl status

# –õ–æ–≥–∏ –±–æ—Ç–∞
sudo tail -f /var/log/telegram-bot/bot.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl https://a950841.fvds.ru/health
```

---

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### Supervisor –∫–æ–º–∞–Ω–¥—ã:
```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
sudo supervisorctl status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
sudo supervisorctl restart telegram-bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
sudo supervisorctl restart telegram-bot-scheduler

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ–π –≥—Ä—É–ø–ø—ã
sudo supervisorctl restart telegram-bot-group

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞/–∑–∞–ø—É—Å–∫
sudo supervisorctl stop telegram-bot-group
sudo supervisorctl start telegram-bot-group
```

### Nginx –∫–æ–º–∞–Ω–¥—ã:
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t

# –õ–æ–≥–∏
sudo tail -f /var/log/nginx/telegram-bot.error.log
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –õ–æ–≥–∏ –±–æ—Ç–∞:
- **–û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥**: `/var/log/telegram-bot/bot.log`
- **–õ–æ–≥ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞**: `/var/log/telegram-bot/scheduler.log`
- **Nginx –¥–æ—Å—Ç—É–ø**: `/var/log/nginx/telegram-bot.access.log`
- **Nginx –æ—à–∏–±–∫–∏**: `/var/log/nginx/telegram-bot.error.log`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:
```bash
# Health check
curl https://a950841.fvds.ru/health

# –°—Ç–∞—Ç—É—Å webhook
curl https://a950841.fvds.ru/webhook
```

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏–º–µ–µ—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç, –Ω–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

```bash
# –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
python schedule_updates.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
update.bat (–Ω–∞ Windows)
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ config.py:
- `BOT_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- `ADMIN_USER_ID` - ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `RESTAURANT_NAME` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
- `RESTAURANT_PHONE` - —Ç–µ–ª–µ—Ñ–æ–Ω
- `RESTAURANT_ADDRESS` - –∞–¥—Ä–µ—Å

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ .env:
```
BOT_TOKEN=your_token
ADMIN_USER_ID=your_id
POLZA_AI_TOKEN=token
PRESTO_API_TOKEN=token
WEBHOOK_MODE=true
WEBHOOK_URL=https://a950841.fvds.ru/webhook
```

---

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `sudo supervisorctl status`
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `sudo tail -f /var/log/telegram-bot/bot.log`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `sudo supervisorctl restart telegram-bot`

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL: `curl -I https://a950841.fvds.ru`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx: `sudo nginx -t && sudo systemctl status nginx`
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ Nginx

### –ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã: `ls -la /opt/telegram-bot/miniapp/`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞: `sudo chown -R botuser:botuser /opt/telegram-bot/miniapp`

---

## üì± –ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ BotFather:
1. `/newapp` –≤ @BotFather
2. –í—ã–±—Ä–∞—Ç—å –±–æ—Ç–∞
3. –ù–∞–∑–≤–∞–Ω–∏–µ: "–†–µ—Å—Ç–æ—Ä–∞–Ω –ú–∞—à–∫–æ–≤"
4. –û–ø–∏—Å–∞–Ω–∏–µ: "–ó–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ –ú–∞—à–∫–æ–≤"
5. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ 512x512
6. URL: `https://a950841.fvds.ru/miniapp/`

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π URL (GitHub Pages):
`https://strdr1.github.io/mashkov-telegram-app/`

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- Nginx —Å security headers
- Rate limiting –¥–ª—è webhook
- –ü—Ä–æ—Ü–µ—Å—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–Ω—ã–º —Ñ–∞–π–ª–∞–º

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: 22.01.2026**
